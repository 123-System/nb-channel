<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NBé¢‘é“å®˜ç½‘ï¼ˆç‰ˆæœ¬å·ï¼š0.23ï¼‰</title>
    <style>
        /* äº®è‰²æ¨¡å¼å˜é‡ï¼ˆé»˜è®¤ï¼‰ */
        :root {
            --bg-color: #f6f7f9;
            --text-color: #18191c;
            --card-bg: #fff;
            --card-border: #e5e9ef;
            --status-bg: #ecf9ff;
            --status-text: #025;
            --status-border: #00a1d6;
            --nav-btn-bg: #e0e0e0;
            --nav-btn-text: #333;
            --nav-btn-hover-bg: #00a1d6;
            --nav-btn-hover-text: white;
            --about-bg: white;
            --about-text: #333;
            --count-bg: #e8f4fd;
            --count-text: #666;
            --count-border: #00a1d6;
            --footer-bg: #f0f0f0;
            --footer-text: #444;
            --footer-border: #ddd;
            --cat-btn-bg: #e0e0e0;
            --cat-btn-text: #333;
            --cat-btn-hover-bg: #00a1d6;
            --cat-btn-hover-text: white;
            --cat-btn-active-bg: #00a1d6;
            --cat-btn-active-text: white;
        }

        /* æš—è‰²æ¨¡å¼å˜é‡ */
        body.dark-mode {
            --bg-color: #1a1a1a;
            --text-color: #e0e0e0;
            --card-bg: #2d2d2d;
            --card-border: #444;
            --status-bg: #1e2a3a;
            --status-text: #a0d0ff;
            --status-border: #4a9eff;
            --nav-btn-bg: #3a3a3a;
            --nav-btn-text: #ccc;
            --nav-btn-hover-bg: #4a9eff;
            --nav-btn-hover-text: #fff;
            --about-bg: #2d2d2d;
            --about-text: #ddd;
            --count-bg: #2a3a4a;
            --count-text: #b0d0ff;
            --count-border: #4a9eff;
            --footer-bg: #2a2a2a;
            --footer-text: #aaa;
            --footer-border: #444;
            --cat-btn-bg: #3a3a3a;
            --cat-btn-text: #ccc;
            --cat-btn-hover-bg: #4a9eff;
            --cat-btn-hover-text: #fff;
            --cat-btn-active-bg: #4a9eff;
            --cat-btn-active-text: #fff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-color);
            padding: 40px 20px;
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            position: relative;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 2rem;
            color: #00a1d6; /* å“ç‰Œè‰²ä¿æŒä¸å˜ */
        }
        .author-info {
            text-align: center;
            margin-bottom: 20px;
            color: #000;
            font-size: 1.8rem;
            font-weight: 500;
        }
        body.dark-mode .author-info {
            color: #fff;
        }
        .nav-bar {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
            position: relative;
        }
        .nav-btn {
            padding: 10px 25px;
            font-size: 1.1rem;
            border: none;
            background: var(--nav-btn-bg);
            color: var(--nav-btn-text);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
            min-width: 90px;
        }
        .nav-btn:hover {
            background: var(--nav-btn-hover-bg);
            color: var(--nav-btn-hover-text);
        }
        .nav-btn.active {
            background: var(--nav-btn-hover-bg);
            color: var(--nav-btn-hover-text);
            box-shadow: 0 4px 10px rgba(0,161,214,0.3);
        }

        /* å¤œé—´æ¨¡å¼åˆ‡æ¢æŒ‰é’® */
        .theme-toggle {
            position: absolute;
            right: 0;
            top: 0;
            background: var(--nav-btn-bg);
            color: var(--nav-btn-text);
            border: none;
            border-radius: 30px;
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.2s;
            z-index: 10;
        }
        .theme-toggle:hover {
            background: var(--nav-btn-hover-bg);
            color: var(--nav-btn-hover-text);
        }
        @media (max-width: 600px) {
            .theme-toggle {
                position: relative;
                margin-bottom: 10px;
                width: 100%;
            }
        }

        /* å›åˆ°é¡¶éƒ¨æŒ‰é’® */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--nav-btn-bg);
            color: var(--nav-btn-text);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            border: 1px solid var(--card-border);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s, background 0.2s;
            z-index: 100;
        }
        .back-to-top.show {
            opacity: 1;
            visibility: visible;
        }
        .back-to-top:hover {
            background: var(--nav-btn-hover-bg);
            color: var(--nav-btn-hover-text);
        }

        .page {
            display: none;
        }
        .page.active-page {
            display: block;
        }
        .home-content {
            background: var(--about-bg);
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            text-align: center;
            font-size: 1.2rem;
            line-height: 1.8;
            color: var(--about-text);
        }
        .home-content p {
            margin: 20px 0;
        }
        .about-content, .changelog-content {
            background: var(--about-bg);
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--about-text);
        }
        .about-content h2, .changelog-content h2 {
            color: #00a1d6;
            margin-bottom: 20px;
            font-size: 1.8rem;
            text-align: center;
        }
        .about-content p, .changelog-content p {
            margin-bottom: 20px;
        }
        .about-content ul, .changelog-content ul {
            margin-left: 40px;
            margin-bottom: 20px;
        }
        .video-count {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.1rem;
            color: var(--count-text);
            background: var(--count-bg);
            padding: 8px;
            border-radius: 8px;
            border-left: 4px solid var(--count-border);
        }
        /* åˆ†ç±»ç­›é€‰æŒ‰é’®æ ·å¼ */
        .category-filter {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        .cat-btn {
            padding: 8px 16px;
            font-size: 0.95rem;
            border: 1px solid var(--card-border);
            background: var(--cat-btn-bg);
            color: var(--cat-btn-text);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .cat-btn:hover {
            background: var(--cat-btn-hover-bg);
            color: var(--cat-btn-hover-text);
            border-color: var(--cat-btn-hover-bg);
        }
        .cat-btn.active {
            background: var(--cat-btn-active-bg);
            color: var(--cat-btn-active-text);
            border-color: var(--cat-btn-active-bg);
        }
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 24px;
        }
        .video-card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            cursor: pointer;
            border: 1px solid var(--card-border);
        }
        .video-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0,161,214,0.15);
            border-color: #00a1d6;
        }
        .cover-wrapper {
            position: relative;
            width: 100%;
            aspect-ratio: 16/9;
            background: #e5e9ef;
        }
        .video-cover {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        .duration-badge {
            position: absolute;
            bottom: 8px;
            right: 8px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
            backdrop-filter: blur(2px);
        }
        .video-info {
            padding: 16px;
        }
        .video-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 8px;
            line-height: 1.4;
            display: -webkit-box;
            line-clamp: 2;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            color: var(--text-color);
        }
        .video-meta {
            display: flex;
            align-items: center;
            gap: 16px;
            font-size: 0.85rem;
            color: var(--count-text);
        }
        .meta-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .bv-text {
            font-size: 0.75rem;
            color: #c0c4cc;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid var(--card-border);
            word-break: break-all;
        }
        .status-note {
            margin-top: 40px;
            padding: 20px;
            background: var(--status-bg);
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--status-text);
            border-left: 4px solid var(--status-border);
        }
        .status-note pre {
            background: #fff;
            padding: 12px;
            border-radius: 6px;
            margin: 12px 0;
            overflow-x: auto;
            border: 1px solid #b8e2f2;
        }
        /* å»ºç«™ç»Ÿè®¡åŒºåŸŸ */
        .site-stats {
            margin-top: 20px;
            padding: 16px 20px;
            background: var(--footer-bg);
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--footer-text);
            text-align: center;
            border: 1px solid var(--footer-border);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“º NBé¢‘é“å®˜ç½‘</h1>
        
        <div class="author-info" id="authorInfo"></div>

        <div class="nav-bar">
            <button class="nav-btn active" id="navHome" onclick="switchPage('home')">é¦–é¡µ</button>
            <button class="nav-btn" id="navVideos" onclick="switchPage('videos')">è§†é¢‘</button>
            <button class="nav-btn" id="navAbout" onclick="switchPage('about')">å…³äº</button>
            <button class="nav-btn" id="navChangelog" onclick="switchPage('changelog')">æ›´æ–°æ—¥å¿—</button>
            <!-- å¤œé—´æ¨¡å¼åˆ‡æ¢æŒ‰é’® -->
            <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()">ğŸŒ™ å¤œé—´æ¨¡å¼</button>
        </div>

        <!-- é¦–é¡µ -->
        <div class="page active-page" id="homePage">
            <div class="home-content">
                <p>ğŸ‘‹ æ¬¢è¿æ¥åˆ° <strong>NBé¢‘é“</strong> å‚è§‚ä½œå“ï¼</p>
                <p>è¿™é‡Œæ±‡é›†äº†UPä¸»<strong>â€œNBå®éªŒå®¤-ä½œæ­»â€</strong>çš„æ‰€æœ‰è§†é¢‘ï¼Œç‚¹å‡»å¡ç‰‡å³å¯è·³è½¬Bç«™è§‚çœ‹ã€‚</p>
                <p>é¢‘é“ä¸»è¦åˆ†äº«æœ‰è¶£çš„åŒ–å­¦ã€ç‰©ç†å®éªŒå’Œæ—¥å¸¸ä½œæ­»å°æŠ€å·§ï¼Œæ¬¢è¿å…³æ³¨ï¼</p>
                <p style="color:#00a1d6; margin-top:30px;">âœ¨ æ³¨ï¼šç‚¹å‡»ä¸Šæ–¹â€œè§†é¢‘â€æŸ¥çœ‹å…¨éƒ¨ä½œå“ âœ¨</p>
                <p>ğŸ”—NBå®éªŒå®¤ï¼ˆåŒ–å­¦ï¼‰ ï¼š<a href="https://hx.nobook.com/console/templates/resource?grade_id=3" target="_blank" rel="noopener noreferrer">ç‚¹å‡»è®¿é—®</a></p>
                <p>ğŸ”—NBå®éªŒå®¤ï¼ˆç‰©ç†ï¼‰ ï¼š<a href="https://wl.nobook.com/console/templates/resource?grade_id=3" target="_blank" rel="noopener noreferrer">ç‚¹å‡»è®¿é—®</a></p>
                <p style="margin-top:20px;">ğŸ”— å‹å•†AWMã®å®˜ç½‘ï¼š<a href="https://45d.cn/AWM/" target="_blank" rel="noopener noreferrer">ç‚¹å‡»è®¿é—®</a></p>
            </div>
        </div>

        <!-- è§†é¢‘é¡µ -->
        <div class="page" id="videosPage">
            <div class="video-count" id="videoCountDisplay"></div>
            <!-- åˆ†ç±»æŒ‰é’®å®¹å™¨ï¼ˆç”±JavaScriptåŠ¨æ€ç”Ÿæˆï¼‰ -->
            <div class="category-filter" id="categoryFilter"></div>
            <div class="video-grid" id="videoGrid">
                <div style="grid-column:1/-1; text-align:center; padding:40px; color:#99a2aa;">
                    â³ æ­£åœ¨åŠ è½½è§†é¢‘æ•°æ®...
                </div>
            </div>
            <div class="status-note" id="statusNote">
                <strong>ğŸ“Œ æ•°æ®æ¥æºï¼š</strong>
                <span id="dataSource">åˆ©ç”¨Bç«™APIåŒæ­¥é…ç½®</span>
            </div>
        </div>

        <!-- å…³äºé¡µ -->
        <div class="page" id="aboutPage">
            <div class="about-content">
                <h2>å…³äº NBé¢‘é“ï¼ˆç‰ˆæœ¬å·ï¼š0.23ï¼‰</h2>
                <p><strong>UPä¸»ï¼š</strong> NBå®éªŒå®¤-ä½œæ­»</p>
                <p><strong>Bç«™UIDï¼š</strong> 3493259582114264</p>
                <p><strong>é¢‘é“ç®€ä»‹ï¼š</strong> ä¸€ä¸ªçƒ­çˆ±ç†ç§‘ï¼ˆå’Œä½œæ­»ï¼‰çš„ç•œä¸­ç”Ÿupä¸»ï¼Œè™½ç„¶è¿™ä¸ªå…¬å¸è¿˜æ²¡æœ‰ä¸Šå¸‚ï¼Œä¸»è¦å‘å¸ƒä»¥ä¸‹å†…å®¹ï¼š</p>
                <ul>
                    <li>âš—ï¸ åŒ–å­¦å®éªŒï¼šé’ ã€é’¾ã€å„ç§çˆ†ç‚¸ç‰©ï¼ˆè¯·å‹¿æ¨¡ä»¿ï¼‰</li>
                    <li>ğŸ§ª ç‰©ç†å®éªŒï¼šç”µè·¯çŸ­è·¯çˆ†ç‚¸ï¼ˆä¾æ—§è¯·å‹¿æ¨¡ä»¿ï¼‰</li>
                    <li>ğŸ¬ æ—¥å¸¸ä½œæ­»ï¼šå„ç§å¥‡æ€ªå°è¯•ï¼ˆç»å¯¹ä¸è¦æ¨¡ä»¿ï¼‰</li>
                </ul>
                <p>æœ¬ç½‘ç«™çš„æ‰€æœ‰è§†é¢‘ä¿¡æ¯ç”±UPæ‰‹åŠ¨ç»´æŠ¤ï¼Œç‚¹å‡»å¡ç‰‡å³å¯è·³è½¬Bç«™è§‚çœ‹åŸè§†é¢‘ã€‚</p>
                <p>æœ¬NBé¢‘é“éƒ¨åˆ†UIè®¾è®¡å’Œé€»è¾‘ç”±AIå®Œæˆã€‚</p>
                <p style="margin-top:30px; text-align:right;">â€”â€” æ„Ÿè°¢æ‚¨çš„æ”¯æŒ â€”â€”</p>
            </div>
        </div>

        <!-- æ›´æ–°æ—¥å¿—é¡µ -->
        <div class="page" id="changelogPage">
            <div class="changelog-content">
                <h2>ğŸ“‹ æ›´æ–°æ—¥å¿—</h2>
                <p><strong>ç‰ˆæœ¬ 0.1ï¼ˆ2025-02-17ï¼‰</strong></p>
                <ul>
                    <li>NBé¢‘é“å®˜ç½‘ä¸Šçº¿</li>
                    <li>åŒ…å«é¦–é¡µã€è§†é¢‘é¡µã€å…³äºé¡µå’Œæ›´æ–°æ—¥å¿—</li>
                    <li>æ‰‹åŠ¨é…ç½®24ä¸ªè§†é¢‘æ•°æ®</li>
                </ul>
                <p><strong>ç‰ˆæœ¬ 0.21ï¼ˆ2025-02-17ï¼‰</strong></p>
                <ul>
                    <li>æ›´æ”¹ä¸€äº›æ–‡å­—è¯´æ˜</li>
                    <li>è§†é¢‘æ•°æ®ç”±æ‰‹åŠ¨é…ç½®æ”¹ä¸ºæ¯å¤©æ—©ä¸Š8ç‚¹è‡ªåŠ¨åŒæ­¥</li>
                    <li>è§†é¢‘é¡µé¡¶éƒ¨å¢åŠ è§†é¢‘æ•°é‡æ˜¾ç¤º</li>
                </ul>
                <p><strong>ç‰ˆæœ¬ 0.22ï¼ˆ2025-02-18ï¼‰</strong></p>
                <ul>
                    <li>å¢åŠ å¤œé—´æ¨¡å¼åˆ‡æ¢æŒ‰é’®</li>
                    <li>å¢åŠ å›åˆ°é¡¶éƒ¨æŒ‰é’®</li>
                    <li>å¢åŠ å»ºç«™ç»Ÿè®¡ä¿¡æ¯</li>
                    <li>å¢åŠ è§†é¢‘åˆ†ç±»ç­›é€‰åŠŸèƒ½ï¼ˆåŒ–å­¦ã€ç‰©ç†ã€æ•‘äººã€å®˜ç½‘ã€å…¶ä»–ï¼‰</li>
                    <li>è§†é¢‘åˆ†ç±»ç›´æ¥ä»Bç«™åˆé›†è‡ªåŠ¨è·å–ï¼Œåˆ†ç±»åä½¿ç”¨åˆé›†åŸå§‹åç§°</li>
                </ul>
                <p style="margin-top:30px;">æ›´å¤šæ›´æ–°æ•¬è¯·æœŸå¾…ï½</p>
            </div>
        </div>

        <!-- å»ºç«™ç»Ÿè®¡åŒºåŸŸ -->
        <div class="site-stats" id="siteStats"></div>
    </div>

    <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
    <div class="back-to-top" id="backToTop" onclick="scrollToTop()">â†‘</div>

    <script>
        // ==========================================================
        // é…ç½®åŒº
        // ==========================================================
        const AUTHOR_NAME = 'NBå®éªŒå®¤-ä½œæ­»';  

        // è§†é¢‘æ•°æ®å ä½ç¬¦ï¼Œå°†ç”±è‡ªåŠ¨æ›´æ–°è„šæœ¬æ›¿æ¢
        const VIDEOS = /*<VIDEOS>*/[]/*</VIDEOS>*/;

        // ==========================================================
        // å…¨å±€å˜é‡
        // ==========================================================
        let currentCategoryKey = 'all';
        let categoryMap = {};

        // ==========================================================
        // åˆ†ç±»ç­›é€‰ç›¸å…³
        // ==========================================================
        function initCategoryFilter() {
            const filterDiv = document.getElementById('categoryFilter');
            if (!filterDiv) return;

            // æ„å»ºåˆ†ç±»æ˜ å°„
            categoryMap = {};
            VIDEOS.forEach(v => {
                if (v.category_key) {
                    categoryMap[v.category_key] = v.category_name;
                }
            });

            // é¢„è®¾åˆ†ç±»é¡ºåºï¼ˆé”®åéœ€ä¸è„šæœ¬ä¸­çš„category_keyä¸€è‡´ï¼‰
            const presetOrder = ['åŒ–å­¦', 'ç‰©ç†', 'æ•‘äºº', 'å®˜ç½‘', 'å…¶ä»–'];
            let buttonsHtml = '<button class="cat-btn active" data-category="all">å…¨éƒ¨</button>';

            presetOrder.forEach(key => {
                if (categoryMap[key] || key === 'å…¶ä»–') { // å…¶ä»–å³ä½¿æ²¡æœ‰è§†é¢‘ä¹Ÿæ˜¾ç¤º
                    const displayName = categoryMap[key] || 'ã€Šå…¶ä»–ã€‹';
                    buttonsHtml += `<button class="cat-btn" data-category="${key}">${displayName}</button>`;
                }
            });

            filterDiv.innerHTML = buttonsHtml;

            // ç»‘å®šç‚¹å‡»äº‹ä»¶
            filterDiv.addEventListener('click', (e) => {
                if (e.target.classList.contains('cat-btn')) {
                    document.querySelectorAll('.cat-btn').forEach(btn => btn.classList.remove('active'));
                    e.target.classList.add('active');
                    currentCategoryKey = e.target.dataset.category;
                    renderVideosByCategory();
                }
            });
        }

        function renderVideosByCategory() {
            const grid = document.getElementById('videoGrid');
            const countSpan = document.getElementById('videoCountDisplay');
            
            let filteredVideos = VIDEOS;
            if (currentCategoryKey !== 'all') {
                filteredVideos = VIDEOS.filter(v => v.category_key === currentCategoryKey);
            }
            
            // æŒ‰å‘å¸ƒæ—¶é—´æ’åº
            filteredVideos.sort((a, b) => (b.pubdate || 0) - (a.pubdate || 0));

            if (filteredVideos.length === 0) {
                grid.innerHTML = '<div style="grid-column:1/-1; text-align:center; padding:60px;">æš‚æ— è¯¥åˆ†ç±»è§†é¢‘</div>';
                if (countSpan) countSpan.innerText = 'å½“å‰å±•ç¤ºè§†é¢‘ï¼š0 ä¸ª';
                return;
            }

            if (countSpan) {
                countSpan.innerText = `å½“å‰å±•ç¤ºè§†é¢‘ï¼š${filteredVideos.length} ä¸ª`;
            }

            grid.innerHTML = filteredVideos.map(video => {
                const b23Url = `https://www.bilibili.com/video/${video.bvid}`;
                return `
                    <div class="video-card" onclick="window.open('${b23Url}', '_blank')">
                        <div class="cover-wrapper">
                            <img class="video-cover" 
                                 src="${video.cover}" 
                                 alt="${video.title}"
                                 loading="lazy"
                                 onerror="this.onerror=null; this.src='https://via.placeholder.com/640x360?text=å°é¢åŠ è½½å¤±è´¥';">
                            <span class="duration-badge">${video.duration || '--:--'}</span>
                        </div>
                        <div class="video-info">
                            <div class="video-title">${video.title}</div>
                            <div class="video-meta">
                                <span class="meta-item">â–¶ï¸ ${video.play || '0'}</span>
                                <span class="meta-item">ğŸ“… ${video.pubdate ? new Date(video.pubdate * 1000).toLocaleDateString() : 'æœªçŸ¥'}</span>
                            </div>
                            <div class="bv-text">${video.bvid}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ==========================================================
        // é¡µé¢åˆ‡æ¢å‡½æ•°
        // ==========================================================
        function switchPage(pageName) {
            document.getElementById('homePage').classList.remove('active-page');
            document.getElementById('videosPage').classList.remove('active-page');
            document.getElementById('aboutPage').classList.remove('active-page');
            document.getElementById('changelogPage').classList.remove('active-page');

            document.getElementById('navHome').classList.remove('active');
            document.getElementById('navVideos').classList.remove('active');
            document.getElementById('navAbout').classList.remove('active');
            document.getElementById('navChangelog').classList.remove('active');

            if (pageName === 'home') {
                document.getElementById('homePage').classList.add('active-page');
                document.getElementById('navHome').classList.add('active');
            } else if (pageName === 'videos') {
                document.getElementById('videosPage').classList.add('active-page');
                document.getElementById('navVideos').classList.add('active');
            } else if (pageName === 'about') {
                document.getElementById('aboutPage').classList.add('active-page');
                document.getElementById('navAbout').classList.add('active');
            } else if (pageName === 'changelog') {
                document.getElementById('changelogPage').classList.add('active-page');
                document.getElementById('navChangelog').classList.add('active');
            }
        }

        // ==========================================================
        // å¤œé—´æ¨¡å¼åˆ‡æ¢
        // ==========================================================
        function toggleTheme() {
            const body = document.body;
            const themeBtn = document.getElementById('themeToggle');
            body.classList.toggle('dark-mode');
            const isDark = body.classList.contains('dark-mode');
            themeBtn.innerText = isDark ? 'â˜€ï¸ ç™½å¤©æ¨¡å¼' : 'ğŸŒ™ å¤œé—´æ¨¡å¼';
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
        }

        function initTheme() {
            const savedTheme = localStorage.getItem('theme');
            const body = document.body;
            const themeBtn = document.getElementById('themeToggle');
            if (savedTheme === 'dark') {
                body.classList.add('dark-mode');
                themeBtn.innerText = 'â˜€ï¸ ç™½å¤©æ¨¡å¼';
            } else {
                themeBtn.innerText = 'ğŸŒ™ å¤œé—´æ¨¡å¼';
            }
        }

        // ==========================================================
        // å›åˆ°é¡¶éƒ¨
        // ==========================================================
        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        window.addEventListener('scroll', function() {
            const backBtn = document.getElementById('backToTop');
            if (window.scrollY > 300) {
                backBtn.classList.add('show');
            } else {
                backBtn.classList.remove('show');
            }
        });

        // ==========================================================
        // å»ºç«™ç»Ÿè®¡
        // ==========================================================
        function updateSiteStats() {
            const statsDiv = document.getElementById('siteStats');
            if (!statsDiv) return;

            if (!VIDEOS || VIDEOS.length === 0) {
                statsDiv.innerHTML = 'ğŸ“Š å»ºç«™æ—¥æœŸï¼š2025-02-17 | æš‚æ— è§†é¢‘æ•°æ®';
                return;
            }

            const latest = VIDEOS.reduce((max, v) => Math.max(max, v.pubdate || 0), 0);
            if (latest === 0) {
                statsDiv.innerHTML = 'ğŸ“Š å»ºç«™æ—¥æœŸï¼š2025-02-17 | æš‚æ— æ›´æ–°è®°å½•';
                return;
            }

            const date = new Date(latest * 1000);
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const hour = String(date.getHours()).padStart(2, '0');
            const minute = String(date.getMinutes()).padStart(2, '0');

            statsDiv.innerHTML = `ğŸ“Š å»ºç«™æ—¥æœŸï¼š2025-02-17 | æœ€åæ›´æ–°ï¼š${year}-${month}-${day} ${hour}:${minute}ï¼ˆæ ¹æ®æœ€æ–°è§†é¢‘å‘å¸ƒæ—¶é—´ï¼‰`;
        }

        // ==========================================================
        // åˆå§‹åŒ–æ¸²æŸ“å‡½æ•°ï¼ˆåŸrenderVideosæ”¹åï¼‰
        // ==========================================================
        function initVideos() {
            const sourceSpan = document.getElementById('dataSource');
            
            if (!VIDEOS || VIDEOS.length === 0) {
                document.getElementById('videoGrid').innerHTML = '<div style="grid-column:1/-1; text-align:center; padding:60px;">æš‚æ— è§†é¢‘æ•°æ®</div>';
                sourceSpan.innerText = 'æ— æ•°æ®';
                return;
            }
            
            initCategoryFilter();
            currentCategoryKey = 'all';
            renderVideosByCategory();
            sourceSpan.innerText = 'åˆ©ç”¨Bç«™APIåŒæ­¥é…ç½®';
        }

        // ==========================================================
        // åˆå§‹åŒ–é¡µé¢
        // ==========================================================
        function init() {
            const authorSpan = document.getElementById('authorInfo');
            authorSpan.innerText = `UPä¸»ï¼š${AUTHOR_NAME}`;
            
            initVideos();
            initTheme();
            updateSiteStats();
        }

        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
